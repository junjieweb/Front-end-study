<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body style="height: 2000px">
<!--模拟body-->
<div class="wrap">
    <!--头部-->
    <div class="header">
        <div class="top">
            <div class="topMain">
                <!--登录注册-->
                <div class="login">
                    <p>欢迎来到商品汇！ 请</p>
                    <p class="loginBtn">
                        <a href="#" class="btn1">登录</a>
                        <a href="#">注册</a>
                    </p>
                </div>
                <!--头部导航-->
                <div class="topNav">
                    <a href="#">我的订单</a>
                    <a href="#">我的购物车</a>
                    <a href="#">我的尚品汇</a>
                    <a href="#">尚品汇会员</a>
                    <a href="#">企业采购</a>
                    <a href="#">关注尚品汇</a>
                    <a href="#">合作招商</a>
                    <a href="#">商家后台</a>
                </div>
            </div>
        </div>
        <div class="bottom">
            <div class="bottomMain">
                <!--logo-->
                <h1 class="logo">
                    <a href="#">
                        <img src="images/Logo.png" alt="">
                    </a>
                </h1>
                <!--搜索框-->
                <div class="search">
                    <input type="text">
                    <button>搜索</button>
                </div>
            </div>

        </div>
    </div>
    <!--分类导航-->
    <div class="typeNav">
        <div class="typeNavMain">
            <h3>全部商品分类</h3>
            <div>
                <a href="#">服装城</a>
                <a href="#">美妆馆</a>
                <a href="#">尚品汇超市</a>
                <a href="#">全球购</a>
                <a href="#">闪购</a>
                <a href="#">团购</a>
                <a href="#">有趣</a>
                <a href="#">秒杀</a>
            </div>
        </div>
    </div>
    <!--商品内容区-->
    <div class="main">
        <div class="mainCon">
            <!--路径导航-->
            <div class="conPoin">
                <!--<a href="#">手机、数码、通讯</a>
                <i>/</i>
                <a href="#">手机</a>
                <i>/</i>
                <a href="#">Apple苹果</a>
                <i>/</i>
                <a>iphone 6S系类</a>-->
            </div>
            <!--商品区域-->
            <div class="infoWrap">
                <!--放大镜区域-->
                <div class="previewWrap">
                    <!--放大镜-->
                    <div class="preview">
                        <!--小图容器-->
                        <div class="zoomImgBox">
                            <!--小图-->
                            <!--                            <img src="images/s1.png" alt="">-->
                            <!--蒙版-->
                        </div>
                        <!--大图容器-->
                    </div>
                    <!--缩略图-->
                    <div class="thumbnail">
                        <a href="javascript:;" class="prev">&lt;</a>
                        <!--图片显示区域-->
                        <div class="itemWrap">
                            <ul>
                                <!--<li><img src="images/s1.png" alt=""></li>
                                <li><img src="images/s2.png" alt=""></li>
                                <li><img src="images/s3.png" alt=""></li>
                                <li><img src="images/s1.png" alt=""></li>
                                <li><img src="images/s2.png" alt=""></li>
                                <li><img src="images/s3.png" alt=""></li>
                                <li><img src="images/s1.png" alt=""></li>
                                <li><img src="images/s2.png" alt=""></li>
                                <li><img src="images/s3.png" alt=""></li>
                                <li><img src="images/s1.png" alt=""></li>
                                <li><img src="images/s2.png" alt=""></li>
                                <li><img src="images/s3.png" alt=""></li>-->
                            </ul>
                        </div>
                        <a href="javascript:;" class="next">&gt;</a>
                    </div>
                </div>
                <!--商品筛选区域-->
                <div class="chooseWrap">
                    <!--商品简介-->
                    <div class="infoTop">

                    </div>
                    <!--筛选区域-->
                    <div class="choose">
                        <!--选择结果-->
                        <div class="choosed">
                            <!--                            <mark>黑色<a href="#">X</a></mark>-->
                            <!--                            <mark>黑色<a href="#">X</a></mark>-->
                        </div>
                        <!--选项-->
                        <div class="chooseArea">
                            <!--<dl>
                                <dt>选择颜色</dt>
                                <dd>金色</dd>
                                <dd>银色</dd>
                                <dd>黑色</dd>
                            </dl>
                            <dl>
                                <dt>内存容量</dt>
                                <dd>16G</dd>
                                <dd>64G</dd>
                                <dd>128G</dd>
                                <dd>256G</dd>
                            </dl>
                            <dl>
                                <dt>选择版本</dt>
                                <dd>公开版</dd>
                                <dd>移动版</dd>
                            </dl>
                            <dl>
                                <dt>购买方式</dt>
                                <dd>官方标配</dd>
                                <dd>优惠移动版</dd>
                                <dd>电信优惠版</dd>
                            </dl>-->
                        </div>
                        <!--购物车-->
                        <div class="carWrap">
                            <div class="control">
                                <input type="text">
                                <a href="javascript:;">+</a>
                                <a href="javascript:;" class="minus">-</a>
                            </div>
                            <button class="addCar">加入购物车</button>
                        </div>
                    </div>

                </div>
            </div>
            <!--商品详情区-->
            <div class="detailWrap">
                <!--侧边栏-->
                <aside>
                    <!--按钮区域-->
                    <div class="tabWrap">
                        <h4 class="active">相关分类</h4>
                        <h4>推荐品牌</h4>
                    </div>
                    <!--内容区域-->
                    <div class="tabContent">
                        <div class="active">
                            <ul class="partList">
                                <li>手机</li>
                                <li>手机壳</li>
                                <li>内存卡</li>
                                <li>iPhone配件</li>
                                <li>贴膜</li>
                                <li>手机耳机</li>
                                <li>移动电源</li>
                                <li>平板电脑</li>
                            </ul>
                            <div class="goodsList">
                                <div class="item">
                                    <div class="partImg">
                                        <img src="images/part01.png" alt="">
                                    </div>
                                    <p class="partName">Apple苹果iPhone 6s (A1699)</p>
                                    <p class="partPrice">￥6088.00</p>
                                    <div class="carBox">
                                        <a href="javascript:;">加入购物车</a>
                                    </div>
                                </div>
                                <div class="item">
                                    <div class="partImg">
                                        <img src="images/part01.png" alt="">
                                    </div>
                                    <p class="partName">Apple苹果iPhone 6s (A1699)</p>
                                    <p class="partPrice">￥6088.00</p>
                                    <div class="carBox">
                                        <a href="javascript:;">加入购物车</a>
                                    </div>
                                </div>
                                <div class="item">
                                    <div class="partImg">
                                        <img src="images/part01.png" alt="">
                                    </div>
                                    <p class="partName">Apple苹果iPhone 6s (A1699)</p>
                                    <p class="partPrice">￥6088.00</p>
                                    <div class="carBox">
                                        <a href="javascript:;">加入购物车</a>
                                    </div>
                                </div>
                                <div class="item">
                                    <div class="partImg">
                                        <img src="images/part01.png" alt="">
                                    </div>
                                    <p class="partName">Apple苹果iPhone 6s (A1699)</p>
                                    <p class="partPrice">￥6088.00</p>
                                    <div class="carBox">
                                        <a href="javascript:;">加入购物车</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>推荐品牌</div>
                    </div>
                </aside>
                <!--详情区-->
                <div class="detail">
                    <!--选择搭配-->
                    <!--商品详情-->
                    <div class="intro">
                        <ul class="tabWrap">
                            <li class="active"><a href="javascript:;">商品介绍</a></li>
                            <li><a href="javascript:;">规格与包装</a></li>
                            <li><a href="javascript:;">售后保障</a></li>
                            <li><a href="javascript:;">商品评价</a></li>
                            <li><a href="javascript:;">手机社区</a></li>
                        </ul>
                        <div class="tabContent">
                            <div class="active">
                                <ul>
                                    <li>分辨率：1920*1080(FHD)</li>
                                    <li>后置摄像头：1200万像素</li>
                                    <li>前置摄像头：500万像素</li>
                                    <li>核 数：其他</li>
                                    <li>频 率：以官网信息为准</li>
                                    <li>品牌： Apple</li>
                                    <li>商品名称：APPLEiPhone 6s Plus</li>
                                    <li>商品编号：1861098</li>
                                    <li>商品产地：中国大陆</li>
                                    <li>商品毛重：0.51kg</li>
                                    <li>热点：指纹识别，Apple Pay，金属机身，拍照神器</li>
                                    <li>系统：苹果（IOS）</li>
                                    <li>像素：1000-1600万品毛重：0.51kg</li>
                                    <li>机身内存：64GB</li>
                                </ul>
                                <img src="images/intro01.png" alt="">
                                <img src="images/intro02.png" alt="">
                                <img src="images/intro03.png" alt="">
                            </div>
                            <div>规格与包装</div>
                            <div>售后保障</div>
                            <div>商品评价</div>
                            <div>手机社区</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="js/data.js"></script>
<script type="text/javascript">
    console.log(goodData);
    window.onload = function () {
        //放大镜大图路径索引
        var previewId = 0;


        // 路径导航
        conPoin();

        function conPoin() {
            //需要获取数据
            var path = goodData.path;

            //路径导航的父容器
            var conPoinNode = document.querySelector('.wrap .main .mainCon .conPoin');

            for (var i = 0; i < path.length; i++) {
                //数组长度是多少，就需要创建多少个a标签，所以直接在循环最开始的时候创建a标签即可
                var aNode = document.createElement('a');

                //判断是否是最后一个路径，如果是，不需要设置href属性，不要创建i标签
                if (i === path.length - 1) {
                    //能进入判断，说明path[i]一定对应数组中最后一个元素的内容

                    //在遍历的过程中，使用path数组中每一个对象的title属性值作为a标签的文本
                    aNode.innerHTML = path[i].title;
                    conPoinNode.appendChild(aNode);
                } else {
                    //如果不是最后一个，需要给a标签设置文本，设置href属性，并且同时添加i标签，添加斜线
                    aNode.innerHTML = path[i].title;
                    aNode.href = path[i].url;
                    conPoinNode.appendChild(aNode);
                    var iNode = document.createElement('i');
                    iNode.innerHTML = '/';
                    conPoinNode.appendChild(iNode);
                }
            }
        }

        //放大镜
        preview();

        function preview() {
            //放大镜父容器
            var previewNode = document.querySelector('.wrap .main .mainCon .infoWrap .previewWrap .preview');
            //小图容器
            var zoomImgBox = document.querySelector('.wrap .main .mainCon .infoWrap .previewWrap .preview .zoomImgBox');
            //创建蒙版
            var maskNode = null;
            //创建大图，
            var bigImg = null;
            //大图容器
            var bigImgBox = null;


            //小图动态渲染
            var imagesrc = goodData.imagessrc;
            var smallImg = document.createElement('img');
            //小图默认应该使用缩略图的第一张来当作图片的路径
            smallImg.src = imagesrc[0].s;
            zoomImgBox.appendChild(smallImg);


            //当鼠标移入时，创建蒙版、大图容器、大图
            previewNode.onmouseenter = function () {
                //当你需要一个为假的值去执行if的逻辑的时候，直接对这个值取反，写在判断条件里就行了
                if (!maskNode) {
                    //创建蒙版
                    maskNode = document.createElement('div');
                    maskNode.className = 'mask';
                    zoomImgBox.appendChild(maskNode);
                    //创建大图容器
                    bigImgBox = document.createElement('div');
                    bigImgBox.className = 'bigImgBox';
                    previewNode.appendChild(bigImgBox);
                    //创建大图
                    bigImg = document.createElement('img');
                    // bigImg = new Image();

                    // bigImg.src = './images/b1.png';
                    bigImg.src = imagesrc[previewId].b;

                    bigImgBox.appendChild(bigImg);
                }

                //当鼠标移入放大镜区域时，才需要绑定move事件
                zoomImgBox.onmousemove = function (event) {
                    //高版本浏览器，会将事件对象作为事件回调函数的第一个形参传递给我们使用
                    //低版本浏览器，是将事件对象作为window的一个属性存在的
                    event = event || window.event;
                    //根据当前鼠标的坐标，来修改蒙版的位置
                    //鼠标的位置是不能通过我们的代码所修改的，所以我们想让蒙版的正中心和鼠标重合的话，我们只能通过修改蒙版位置来实现
                    //向左和向上修正自身宽度和高度一半的值，即可让蒙版中心和鼠标重合
                    //getBoundingClientRect() 是获取一个元素相对于视口的最干净的获取方式
                    //鼠标距离视口左侧的值 - 父容器距离视口左侧的值 - 蒙版宽度的一半
                    var maskPosition = {
                        left: event.clientX - previewNode.getBoundingClientRect().left - maskNode.offsetWidth / 2,
                        top: event.clientY - previewNode.getBoundingClientRect().top - maskNode.offsetHeight / 2

                    };
                    //蒙版的边界值判断
                    //大于最大值等于最大值，小于最小值等于最小值，范围限定类
                    //大于最大值等于最小值，小于最小值等于最大值，首位相接类
                    if (maskPosition.left < 0) {
                        maskPosition.left = 0;
                    } else if (maskPosition.left > previewNode.clientWidth - maskNode.offsetWidth) {
                        maskPosition.left = previewNode.clientWidth - maskNode.offsetWidth;
                    }
                    if (maskPosition.top < 0) {
                        maskPosition.top = 0;
                    } else if (maskPosition.top > previewNode.clientHeight - maskNode.offsetHeight) {
                        maskPosition.top = previewNode.clientHeight - maskNode.offsetHeight;
                    }

                    //修改蒙版位置
                    maskNode.style.left = maskPosition.left + 'px';
                    maskNode.style.top = maskPosition.top + 'px';
                    //根据蒙版的位置，来计算大图的位置
                    //计算比例  蒙版可移动空间 / 大图可移动空间
                    var scale = (previewNode.clientWidth - maskNode.offsetWidth) / (bigImg.offsetWidth - bigImgBox.clientWidth);

                    //根据当前蒙版的位置和计算的比例，得到大图的位置
                    var bigImgPosition = {
                        left: maskPosition.left / scale,
                        top: maskPosition.top / scale
                    }
                    bigImg.style.marginLeft = -bigImgPosition.left + 'px';
                    bigImg.style.marginTop = -bigImgPosition.top + 'px';
                }
                //当鼠标离开放大镜区域时，移除move事件和leave事件，并删除蒙版、大图容器、大图
                previewNode.onmouseleave = function () {
                    zoomImgBox.removeChild(maskNode);
                    previewNode.removeChild(bigImgBox);
                    //删除元素后，需要重置元素变量为空的状态
                    maskNode = null;
                    bigImgBox = null;
                    bigImg = null;

                    //dom0级事件
                    //dom0级事件只能绑定一个回调函数，如果设置多个，其实就是覆盖操作，只要最后一个会生效
                    //dom0级事件的解绑，本质就是断开事件属性与回调函数的链接，赋值为null即可
                    //并不是所有的事件都支持dom0，有些事件只支持dom2，比如滚轮事件、过渡结束事件
                    //通过addEventListener  叫做dom2级事件
                    zoomImgBox.onmousemove = null;
                    previewNode.onmouseleave = null;
                }

            }

        }

        //缩略图
        thumbnail();

        function thumbnail() {
            //左右按钮
            var prevNode = document.querySelector('.wrap .main .mainCon .infoWrap .previewWrap .thumbnail a.prev');
            var nextNode = document.querySelector('.wrap .main .mainCon .infoWrap .previewWrap .thumbnail a.next');

            //图片容器  为了控制这个ul的left值
            var list = document.querySelector('.wrap .main .mainCon .infoWrap .previewWrap .thumbnail .itemWrap ul');


            //缩略图动态渲染
            //获取图片数据
            var imagessrc = goodData.imagessrc;
            imagessrc.forEach(function (item) {
                //当前这个数组有多少个元素（长度），我们就要创建多少个li，并在每一个li中添加一张图片
                //图片的链接就是当前数组中每一个对象的s属性的值(item.s)
                var liNode = document.createElement('li');
                var imgNode = document.createElement('img');
                imgNode.src = item.s;
                liNode.appendChild(imgNode);
                list.appendChild(liNode);
            });


            //获取li集合
            var items = document.querySelectorAll('.wrap .main .mainCon .infoWrap .previewWrap .thumbnail .itemWrap ul li');

            //移动图片张数
            var moveNum = 2;
            //定义默认显示张数
            var showImg = 5;
            //每次移动两张小图  计算单次的偏移量
            //显示图片的张数 * （图片的宽度 + 一个图片的marginRight）
            var moveLeft = moveNum * (items[0].offsetWidth + 20);
            // console.log(moveLeft);
            //计算一共可以移动的距离 （总张数 - 显示的张数） * （图片宽 + marginRight）
            var countLeft = (items.length - showImg) * (items[0].offsetWidth + 20);
            //需要定义一个变量记录已经移动的距离
            var tempLeft = 0;
            //给next按钮绑定单击事件
            nextNode.onclick = function () {
                //如果已经走过的距离小于总共可以走的距离，才能移动
                if (tempLeft < countLeft) {
                    //总距离 - 已经移动的距离 = 剩余距离
                    //每一次的移动，都使用剩余距离和单次偏移做比较，如果剩余距离大于单次偏移，则正常移动，如果不大于，剩多少走多少
                    if (countLeft - tempLeft > moveLeft) {
                        tempLeft += moveLeft;
                    } else {
                        //如果能进入这里，说明当前的剩余空间不够走一个moveLeft，直接走剩余部分
                        tempLeft = countLeft;
                    }
                    //需要给list设置left的值为负值，才能让容器向左移动，看到右侧的图片
                    list.style.left = -tempLeft + 'px';
                }
            }
            //给prev绑定单击事件
            prevNode.onclick = function () {
                //点击右侧按钮记录的已经移动的距离，对于prev按钮来说，就是可移动的距离
                if (tempLeft > 0) {
                    //能够进入这个if中，说明当前左侧还有剩余空间，可以移动
                    if (tempLeft > moveLeft) {
                        tempLeft -= moveLeft;
                    } else {
                        tempLeft = 0;
                    }
                    //list的left值，永远都为负值，最大为0，如果出现正值，ul左侧一定出现留白了
                    list.style.left = -tempLeft + 'px';
                }
            }

        }

        //缩略图点击功能
        thumbnailClick();

        function thumbnailClick() {
            //获取缩略图中li的集合
            var items = document.querySelectorAll('.wrap .main .mainCon .infoWrap .previewWrap .thumbnail .itemWrap ul li');
            var imagessrc = goodData.imagessrc;
            //获取小图
            var smallImg = document.querySelector('.wrap .main .mainCon .infoWrap .previewWrap .preview .zoomImgBox img');
            for (var i = 0; i < items.length; i++) {
                items[i].index = i;
                //增加索引是为了在点击事件中判断当前点击的li的索引，
                // 然后去数组中找到这个索引对应的那个对象，然后把这个对象的s属性对应的链接，设置给小图
                items[i].onclick = function () {
                    var imgSrc = imagessrc[this.index].s;
                    smallImg.src = imgSrc;
                    //在当前这个位置，不能直接操作大图，原因是当你能够点击缩略图时，大图元素一定是不存在的
                    // console.log(this.index);
                    previewId = this.index;
                }
            }

        }

        //商品信息数据渲染
        infoData();

        function infoData() {
            var infoTopNode = document.querySelector('.wrap .main .mainCon .infoWrap .chooseWrap .infoTop');
            var goodsDetail = goodData.goodsDetail;
            var str = `
                <h3>${goodsDetail.title}</h3>
                <p>${goodsDetail.recommend}</p>
                <div class="priceWrap">
                <div class="priceTop">
                <p class="title">价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</p>
                <p class="price">
                <i>¥</i>
                <em>${goodsDetail.price}</em>
                <span>降价通知</span>
                </p>
                <p class="remark">
                <i>累计评价</i>
                <span>${goodsDetail.evaluateNum}</span>
                </p>
                </div>
                <div class="priceBottom">
                <p class="title">促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</p>
                <div>
                <i>${goodsDetail.promoteSales.type}</i>
                <span>${goodsDetail.promoteSales.content}</span>
                </div>
                </div>
                </div>
                <div class="support">
                <div>
                <p class="title">支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</p>
                <p class="text">${goodsDetail.support}</p>
                </div>
                <div>
                <p class="title">配&nbsp;送&nbsp;至</p>
                <p class="text">${goodsDetail.address}</p>
                </div>
                </div>`;
            infoTopNode.innerHTML = str;
        }

        // 选择其余逻辑
        chooseArea();

        function chooseArea() {
            var crumbData = goodData.goodsDetail.crumbData;
            var chooseArea = document.querySelector('.wrap .main .mainCon .infoWrap .chooseWrap .choose .chooseArea');
            //这个数组中，有多少个对象，就要创建多少个dl，还有dt，每个对象的title属性，作为dt的文本
            //每个对象中的data属性的长度，决定了这个dl中有多少个dd，data数组中每一个元素的值，就是dd的文本
            crumbData.forEach(function (item) {
                //当前的item是数组当中每一个对象
                //创建dl
                var dlNode = document.createElement('dl');
                //创建dt
                var dtNode = document.createElement('dt');
                //将每一个对象中的title属性作为dt的文本
                dtNode.innerHTML = item.title;
                dlNode.appendChild(dtNode);

                item.data.forEach(function (item) {
                    //这里的item对应的是data中存储的每一个选项的文本(type)及价格的改变（changePrice）
                    var ddNode = document.createElement('dd');
                    ddNode.innerHTML = item.type;
                    //给每一个选项添加价格改变的属性
                    ddNode.setAttribute('changePrice', item.changePrice);
                    dlNode.appendChild(ddNode);
                });
                //代码执行到这里，完成了一个dl及内部所有内容的拼装
                chooseArea.appendChild(dlNode);
            });
            //获取dl集合
            var dlList = document.querySelectorAll('.wrap .main .mainCon .infoWrap .chooseWrap .choose .chooseArea dl');
            //查找选择结果父元素
            var choosedNode = document.querySelector('.wrap .main .mainCon .infoWrap .chooseWrap .choose .choosed');
            //数组容器
            var arr = new Array(dlList.length);
            //数组填充方法    用传入的参数填充数组中的每一个元素
            arr.fill(0);
            console.log(arr);
            //为了能够使我们选择的结果有序，所以我们需要在存储结果的时候，就让它们按照选项的顺序进行存储
            //声明一个和选项个数长度相等的数组，然后每一次点击时，获取当前点击的这个dd的父级（dl）的索引
            //然后将选择的结果，存储进数组当中这个索引对应的位置
            //在创建时，我们遍历数组，有内容则创建，每内容直接忽略

            //遍历dl的集合，给每一个dl添加索引，并且分别给每一个dl当中的dd集合绑定单击事件
            for (var i = 0; i < dlList.length; i++) {
                dlList[i].index = i;

                (function () {
                    //分别获取每一个dl当中的dd
                    var ddList = dlList[i].getElementsByTagName('dd');
                    //给每一个dd绑定单击事件
                    for (var j = 0; j < ddList.length; j++) {
                        ddList[j].onclick = function () {
                            //高亮切换，先将当前这一组dd的文字的颜色设置为#666，
                            //然后将当前点击的这个dd（this）的color设置为red
                            for (var i = 0; i < ddList.length; i++) {
                                ddList[i].style.color = '#666';
                            }
                            this.style.color = 'red';

                            //根据当前点击的dd的父元素dl的索引，去数组当中对应的位置存当前点击的dd（this）的文本
                            //为了能够同时使用dd的文本和dd的changePrice属性，我们直接将当前这个dd的dom对象存入arr数组中
                            arr[this.parentNode.index] = this;
                            //增加了筛选条件，所以需要调用价格计算的函数
                            priceSum(arr);
                            console.log(arr);

                            //创建逻辑
                            //每一次创建新的筛选结果之前，都清空一次父元素
                            choosedNode.innerHTML = '';
                            //每次点击dd的时候，我们的筛选条件都会发生改变，我们就需要遍历arr数组，找到当中有内容的元素
                            //获取文本，创建一组mark的结构，放入到choosedNode当中
                            arr.forEach(function (item, index) {
                                //[银色,0,移动版,优惠版]
                                // 0   1     2    3
                                if (item) {
                                    //所有能够进入这个if的情况，一定是当前item指向的元素有内容，
                                    //因为没有内容的元素值为0，隐式类型转换为false，不能够通过if的判断

                                    //创建mark标签
                                    var markNode = document.createElement('mark');
                                    markNode.innerHTML = item.innerHTML;
                                    //创建a标签作为删除按钮
                                    var aNode = document.createElement('a');
                                    aNode.innerHTML = 'X';
                                    //在创建a标签的时候，给每一个a标签添加一个属性，用来保存当前这个选项的索引
                                    //setAttribute() 设置自定义属性，参数1：要设置的属性名称，参数2：要设置的属性
                                    aNode.setAttribute('num', index);
                                    markNode.appendChild(aNode);
                                    choosedNode.appendChild(markNode);
                                }
                            });
                            //获取a标签的集合
                            var aList = document.querySelectorAll('.wrap .main .mainCon .infoWrap .chooseWrap .choose .choosed mark a');
                            //删除逻辑
                            for (var k = 0; k < aList.length; k++) {
                                aList[k].onclick = function () {
                                    //删除mark标签
                                    choosedNode.removeChild(this.parentNode);
                                    //获取a标签身上的num属性
                                    //getAttribute() 获取自定义属性，参数：要获取的属性名称，返回对应的属性值，但是是字符串类型
                                    var index = parseInt(this.getAttribute('num'));
                                    //删除mark标签之后，还要将对应位置的数据重置为0
                                    arr[index] = 0;
                                    //发生删除操作时，我们减少了筛选的条件，所以需要调用价格计算函数
                                    priceSum(arr);
                                    console.log(arr);
                                    //重置当前index对应的dl中dd集合的高亮
                                    var ddList = dlList[index].getElementsByTagName('dd');
                                    for (var l = 0; l < ddList.length; l++) {
                                        ddList[l].style.color = '#666';
                                    }
                                    ddList[0].style.color = 'red';

                                };
                            }

                        };


                    }
                })();
            }
            //价格计算
            //只要是筛选条件发生改变时（数组内容发生改变时），我们都需要调用这个函数将改变后的数组传过来，然后计算价格
            function priceSum(arr) {
                // console.log('价格重新计算');
                //获取原价
                var price = goodData.goodsDetail.price;
                //显示价格的元素
                var priceNode = document.querySelector('.wrap .main .mainCon .infoWrap .chooseWrap .infoTop .priceWrap .priceTop p.price em');
                //遍历传入的数组，将数组中每一个dd的changePrice和原价加等在一起，就是最终的价格
                arr.forEach(function (item) {
                    //在这个循环中，item对应的是传入数组当中存储的每一个dd元素
                    if (item) {
                        price += parseInt(item.getAttribute('changePrice'));
                    }
                });
                // console.log(price);
                //将计算后的价格设置给价格的元素
                priceNode.innerHTML = price;
            }

        }

        /*//tab切换构造函数
        function Tob(tabBtn, tabContent) {
            //this指向当前实例对象
            this.tabBtn = tabBtn;
            this.tabContent = tabContent;
            //提前在外部将实例对象的this，用一个其他的变量进行保存，就是为了在内部函数中this被占用时所使用
            var _this = this;

            for (var i = 0; i < this.tabBtn.length; i++) {
                this.tabBtn[i].index = i;
                this.tabBtn[i].onclick = function () {
                    //当前事件回调函数的作用域当中，有自己的this，指向当前事件源
                    _this.tabClick(this);
                }
            }
        }

        //点击之后，具体的逻辑
        Tob.prototype.tabClick = function (btn) {
            for (var i = 0; i < this.tabBtn.length; i++) {
                this.tabBtn[i].className = '';
                this.tabContent[i].className = '';
            }
            this.tabContent[btn.index].className = 'active';
            btn.className = 'active';
        };

        //侧边栏tab切换
        asideTab();

        function asideTab() {
            //获取按钮集合
            var tabBtn = document.querySelectorAll('.wrap .main .mainCon .detailWrap aside .tabWrap h4');
            //获取内容区集合
            var tabContent = document.querySelectorAll('.wrap .main .mainCon .detailWrap aside .tabContent>div');
            var t1 = new Tob(tabBtn, tabContent);

        }*/

        //实现tab切换的构造函数
        function Tab(tabBtn, tabContent) {
            //构造函数内部this的指向，是实例化对象
            this.tabBtn = tabBtn;
            this.tabContent = tabContent;
            //在外部用另一个变量，保存当前作用域内的this（实例对象）
            var _this = this;
            for (var i = 0; i < this.tabBtn.length; i++) {
                this.tabBtn[i].index = i;
                this.tabBtn[i].onclick = function () {
                    //当前是按钮单击事件的回调函数作用域内，this指向的是事件源
                    _this.tabClick(this);
                }
            }
        }

        Tab.prototype.tabClick = function (btn) {
            //btn这个形参保存的是当前点击的哪个按钮
            //清除所有按钮及内容区的active类
            for (var i = 0; i < this.tabBtn.length; i++) {
                this.tabBtn[i].className = '';
                this.tabContent[i].className = '';
            }
            btn.className = 'active';
            this.tabContent[btn.index].className = 'active';
        };

        asideTab();

        function asideTab() {
            //获取按钮集合
            var tabBtn = document.querySelectorAll('.wrap .main .mainCon .detailWrap aside .tabWrap h4');
            //获取内容区集合
            var tabContent = document.querySelectorAll('.wrap .main .mainCon .detailWrap aside .tabContent>div');

            new Tab(tabBtn, tabContent);
        }

        //商品详情tab切换
        introTab();
        function introTab() {
            var tabBtn = document.querySelectorAll('.wrap .main .mainCon .detailWrap .intro .tabWrap li');
            var tabContent = document.querySelectorAll('.wrap .main .mainCon .detailWrap .intro .tabContent > div');
            new Tab(tabBtn, tabContent);
        }


        /*function asideTab() {
            //获取按钮集合
            var tabBtn = document.querySelectorAll('.wrap .main .mainCon .detailWrap aside .tabWrap h4');
            //获取内容区集合
            var tabContent = document.querySelectorAll('.wrap .main .mainCon .detailWrap aside .tabContent>div');
            //给每一个按钮添加索引，绑定单击事件，单击事件触发时，获取事件源（当前点击的按钮 this）的index属性
            //然后去内容区集合中让这个索引对应的div添加active这个class
            for (var i = 0; i < tabBtn.length; i++) {
                tabBtn[i].index = i;
                tabBtn[i].onclick = function () {
                    for (var i = 0; i < tabBtn.length; i++) {
                        //让所有的按钮都取消active这个class
                        tabBtn[i].className = '';
                        //让所有的内容区都取消active这个class
                        tabContent[i].className = '';
                    }
                    //给当前点击的按钮添加active
                    this.className = 'active';
                    //给this的索引的对应的内容区添加active
                    tabContent[this.index].className = 'active';
                }
            }
        }*/

    };
</script>
</body>
</html>