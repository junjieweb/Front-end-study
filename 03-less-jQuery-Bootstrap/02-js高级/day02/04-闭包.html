<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>
    /*
        闭包的三大要素
            1、函数存在嵌套关系
            2、内部函数必须引用外部函数的局部变量
            3、外部函数必须调用
    */
    function fn() {
        //a变量是fn的变量对象当中的
        var a = 0;

        function fn1() {
            a++;
            console.log(a);
        }

        return fn1;
    }

    var f = fn();
    f();//1
    f();//2
    f();//3

    //如何关闭闭包机制
    f = null;
    /*
        闭包的好处
            1、能够在函数外部，访问到内部的变量
            2、延长局部变量的声明周期，其本质是因为外部函数的执行环境，不能被销毁，因为存在引用关系
        滥用闭包会出现内存溢出和内存泄露的情况。
        如果正常情况下，闭包不是必须手动清除的，如果出现异常，我们就要手动清除
    */

    //存在几套闭包机制，取决于外部函数被调用几次
    // var f2 = fn();
    // f2();//1
    // f2();//2
    // f2();//3


    /*function fn2() {
        var a = 0;
        a++;
        console.log(a);
    }

    fn2();
    fn2();
    fn2();*/

</script>

</body>
</html>