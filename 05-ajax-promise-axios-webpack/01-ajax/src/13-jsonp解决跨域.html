<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>13-jsonp解决跨域.html</title>
</head>
<body>

<h3>当前页面一定不要用服务器去打开，因为要制造跨域问题，用jsonp去解决</h3>
<button id="btn">点我获取数据</button>

<script>

    const btn = document.getElementById('btn');
    btn.onclick = () => {
        //1.创建script节点
        const scriptNode = document.createElement('script');
        //2.给节点指定src属性（请求地址）
        scriptNode.src = 'http://127.0.0.1:8080/test_jsonp?callback=test';
        //3.将节点放入页面
        document.body.appendChild(scriptNode);
        //4.准备好一个函数
        window.test = (a) => {
            console.log(a);
        }
        //5.移除已经使用过的script节点
        document.body.removeChild(scriptNode);
    }

</script>

</body>
</html>