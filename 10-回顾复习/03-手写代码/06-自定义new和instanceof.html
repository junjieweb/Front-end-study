<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>玉树临风美少年，揽镜自顾夜不眠 </title>
</head>

<body>
  <script type="text/javascript">
    /* 
  自定义new工具函数
    语法: newInstance(Fn, ...args)
    功能: 创建Fn构造函数的实例对象
    实现: 创建空对象obj, 调用Fn指定this为obj, 返回obj
  */
    function newInstance(Fn, ...args) {
      // 创建一个新的对象
      const obj = {}
      // 执行构造函数
      const result = Fn.apply(obj, args) // 相当于: obj.Fn()
      // 如果构造函数执行的结果是对象, 返回这个对象
      if (result instanceof Object) {
        return result
      }
      // 如果不是, 返回新创建的对象
      obj.__proto__.constructor = Fn // 让原型对象的构造器属性指向Fn

      return obj
    }

    /* 
    自定义instanceof工具函数: 
      语法: myInstanceOf(obj, Type)
      功能: 判断obj是否是Type类型的实例
      实现: Type的原型对象是否是obj的原型链上的某个对象, 如果是返回true, 否则返回false
    */
    function myInstanceOf(obj, Type) {
      // 得到原型对象
      let protoObj = obj.__proto__

      // 只要原型对象存在
      while (protoObj) {
        // 如果原型对象是Type的原型对象, 返回true
        if (protoObj === Type.prototype) {
          return true
        }
        // 指定原型对象的原型对象
        protoObj = protoObj.__proto__
      }

      return false
    }
  </script>
</body>

</html>